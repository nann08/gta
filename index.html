<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vercel Grand Theft Auto</title>
    
    <!-- Basic styling to make UI elements visible and positioned -->
    <style>
        body { margin: 0; overflow: hidden; background-color: #111827; color: white; font-family: sans-serif; }
        #gameCanvas { display: block; width: 100vw; height: 100vh; }
        #ui-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        
        /* Stats Panel (Top Right) */
        #stats-panel { 
            position: absolute; 
            top: 1rem; 
            right: 1rem; 
            background: rgba(0, 0, 0, 0.7); 
            padding: 10px; 
            border-radius: 8px; 
            pointer-events: auto;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        #health-bar-container { display: flex; align-items: center; margin-top: 5px; font-size: 14px; }
        #health-bar-fill { height: 10px; width: 100px; background-color: #4CAF50; border-radius: 5px; margin-left: 5px; transition: width 0.3s; }
        
        /* Minimap (Bottom Right) */
        #minimap-canvas { 
            position: absolute; 
            bottom: 1rem; 
            right: 1rem; 
            border: 3px solid rgba(255, 255, 255, 0.5); 
            border-radius: 12px; 
            pointer-events: none;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        
        /* Chat Window (Bottom Left) */
        #chat-window { 
            position: absolute; 
            bottom: 1rem; 
            left: 1rem; 
            width: 300px; 
            max-height: 200px; 
            background: rgba(0, 0, 0, 0.7); 
            padding: 10px; 
            border-radius: 8px; 
            display: flex; 
            flex-direction: column; 
            pointer-events: auto; 
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        #chat-messages { list-style: none; padding: 0; margin: 0 0 10px 0; overflow-y: auto; flex-grow: 1; font-size: 14px; }
        #chat-input { padding: 8px; border: none; border-radius: 4px; background: #333; color: white; margin-top: 5px; }

        /* Mission Panel (Center) */
        #mission-panel { 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: rgba(25, 25, 40, 0.95); 
            padding: 20px; 
            border-radius: 10px; 
            text-align: center; 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.8); 
            pointer-events: auto;
            max-width: 400px;
        }
        #mission-accept {
            background-color: #3B82F6; /* Blue 500 */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.2s;
        }
        #mission-accept:hover { background-color: #2563EB; }
        
        .hidden { display: none !important; }
    </style>

    <!-- Corrected CDN links for Three.js and Socket.io -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <div id="ui-container">
        <!-- Ping & Health -->
        <div id="stats-panel">
            <div id="ping-display">Ping: -- ms</div>
            <div id="health-bar-container">
                Health: <div id="health-bar-fill"></div>
            </div>
        </div>

        <!-- Minimap (Canvas will be rendered here) -->
        <canvas id="minimap-canvas" width="150" height="150"></canvas>
        
        <!-- Chat Window -->
        <div id="chat-window">
            <ul id="chat-messages"></ul>
            <input type="text" id="chat-input" placeholder="Type a message...">
        </div>
    </div>

    <!-- Mission Panel -->
    <div id="mission-panel" class="hidden">
        <h2 id="mission-title"></h2>
        <p id="mission-description"></p>
        <button id="mission-accept">Accept Mission</button>
    </div>

    <!-- Game Logic Modules -->
    <script type="module" src="./src/world.js"></script>
    <script type="module" src="./src/player.js"></script>
    <script type="module" src="./src/car.js"></script>
    <script type="module" src="./src/networking.js"></script>
    <script type="module" src="./src/main.js"></script>

</body>
</html>
